<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <title>Sample</title>
  <link rel="stylesheet" href="/wagle/css/common.css">
  <script src="http://code.jquery.com/jquery-latest.min.js"></script>

  <link rel="stylesheet" href="/wagle/css/goodsShow.css">

  <style>
    #imagewrap {
      height: 100%;
      position: relative;
      overflow: hidden;
    }

    #slideList {
      position: absolute;

      height: 100%;
      left: 0;
      top: 0;

    }

    #slideList>.imgs {

      float: left;

    }

    #slideList.active {
      transition: 0.5s ease-out;
    }

    .direc {
      position: absolute;
      z-index: 1;
    }
  </style>
  <script>


    //나중에 데이터로 대체
    var userlike = false;
    $(function () {

      //숫자만 입력가능 및 콤마로 자동 변환 이벤트
      let inputDom = document.querySelector("#submitPoint > input");
      inputDom.addEventListener("input", function (e) {
        let val = e.target.value.replace(/[^0-9]/g, '');
        e.target.value = val.replace(/\d(?=(?:\d{3})+$)/g, '$&,');
      });
      ////////////////////////////////////////

      //잘못 입력에 대한 모달꺼지는 것 정의
      $("#basicModal").click(() => {
        $("#basicModal").fadeOut();
      })
      ///////////////////////////////////


      $("#likebox").click(function () {
        if (window.userlike === false) {
          $("#likeImage").attr("src", " /wagle/image/favorite.jpg");
        } else {
          $("#likeImage").attr("src", "/wagle/image/favorite_border.jpg");
        }
        userlike = !userlike;
      })

      $("#slideList").click(function (event) {
        event.offsetX
        if (event > 350) {

        } else {

        }
      });

    });




    //validation Price
    function askingPrice() {
      let askPriceDom = $("#submitPoint > input");
      let askPrice = askPriceDom.val();
      //숫자 검증
      if (askPriceValidation(askPrice)) {
        //검증 완료 후 숫자 변환 
        askPriceComma = askPrice.toString().replace(/\B(?<!\.\d*)(?=(\d{3})+(?!\d))/g, ",");
        showModal("제출하신 가격은 <span id='priceComma'>" + askPriceComma + "</span>원 입니다.<br>" +
          "한번 제출한 가격은 취소할 수 없습니다. <br>" +
          "계속 진행하시겠습니까?", "submit");

      }
    }
    //제출된 가격을 검사하는 함수
    function askPriceValidation(price) {
      var num = Number(price);
      //숫자가 아니거나, 정수가 아닐시
      if (Number.isNaN(num) || !Number.isInteger(num)) {
        showModal("제출된 가격을 확인해주세요", "reject");
        return false;
      } else if (num < 0) {
        showModal("0보다 작은 숫자는 입력하실 수 없습니다.", "reject");
        return false;
      }

      return true;

    }
    //텍스트에 대해 모달창 보여주는 함수
    function showModal(text, command) {

      if (command !== "submit") {
        let modalContent = $("#basicModal-Content");
        modalContent.text("잘못된 입력입니다. " + text);
        $("#basicModal").fadeIn();
        return false;
      }
      let submitModal = $("#submitModalText");
      submitModal.html(text);
      $("#submitModal").fadeIn();
      return true;

    }

    function isOk(status) {
      if (status === true) {
        //ajax보내는 함수 정의
      }

      $("#submitModal").fadeOut();

    }
    //모달 관련 함수 끝


  </script>
  <style>

  </style>
</head>

<body>

  <div id="center">
    <div id="container">
      <div id="wrap">

        <div id="top">
          <div id="topbox1" class="topbox">
            <div id="imagebox">
              <img id="left" class="direc hidden" src="wagle/image/left.png" alt="">
              <img id="right" class="direc hidden" src="wagle/image/right.png" alt="">
              <div id="imagewrap">
                <div id="slideList">
                  <img class="imgs" src="wagle/image/image 17.jpg">
                  <img class="imgs" src="wagle/image/mang1.png">
                  <img class="imgs" src="wagle/image/mang2.jpg">
                  <img class="imgs" src="wagle/image/mang3.jpg">
                </div>
              </div>
            </div>

            <div id="likebox">
              <img id="likeImage" src="wagle/image/favorite_border.jpg">
              <div id="jjim">찜하기</div>
            </div>
          </div>
          <div id="topbox2" class="topbox">
            <div class="topbox2c" id="title">
              <div id="titleFont">[귀염뽀짝] 망고미 잠옷

              </div>
              <div id="reportFont">
                <span id="sirenfont" class="siren">신고하기</span>
                <img id="sirenimg" class="siren" src="wagle/image/Siren Rounded.jpg">
              </div>
            </div>
            <div class="topbox2c" id="seller">
              <div id="sellerBox">
                <div id="sellerfont">판매자 : <span id="sellerNic">망고미</span></div>
                <div id="disBox">와글이와의 거리 "<span id="dis">42</span>"</div>
              </div>
              <div id="addrBox">
                <div id="addrfont">거래장소 : <span id="dong">마포구</span></div>
                <span>(정확한 장소는 입찰 후 공개됩니다.)</span>
              </div>

            </div>
            <div class="topbox2c" id="contentbox">상품설명:
              <div id="content"> 나 너에게 앞에 있어~ 우리의 시간을 되돌려줘</div>
            </div>
            <div class="topbox2c" id="priceAndTimeFont">
              <span id="priceFont">경매 시작 가격</span>
              <span id="timeoutFont">경매 종료까지 시간</span>
            </div>
            <div class="topbox2c" id="priceAndTime">
              <span id="priceVal">50,000원</span>
              <span id="timeVal">1일 05시간 30분</span>
            </div>
            <div class="topbox2c" id="topbox2footer">
              <div id="person">
                <span class="footerFont">현재 경재 참여 인원</span>
                <img id="personimg" src="wagle/image/person.png" alt="">
                <span id="personcnt">20</span>
              </div>
              <div id="jjimp">
                <span class="footerFont">이 상품을 찜한 사람</span>
                <img src="wagle/image/favorite.jpg">
                <span id="jjimcnt">10</span>
              </div>
            </div>
          </div>
        </div>
        <div id="mid">
          <div id="midTextBox">
            <div class="midText">나의 사용 가능 포인트</div>
            <div class="midText">희망 가격을 제출하면 경매에 자동으로 참여됩니다.</div>
          </div>
          <div id="myPointBox">
            <div id="myPoints" class="myPointBoxChild">
              <div id="imgWrap">
                <img id="coinImg" src="wagle/image/image 68.png" alt="">
              </div>
              <div id="myPoint">44000</div>
              <div id="fillText">
                <span>충전하기</span>
              </div>

            </div>
            <div id="submitPoint" class="myPointBoxChild">
              <input type="text" placeholder="희망 가격을 제출해 주세요">
              <div id="submitButton" onclick="askingPrice()">제출하기</div>
            </div>

          </div>
        </div>
        <div id="bottom">
          <div>
            <div id="bottomFont">
              나의 희망 가격
            </div>
            <div id="bidsPriceCheck">
              <span>44000</span> 원
            </div>
          </div>
        </div>
      </div>


    </div>
    <script src="wagle/js/slide.js"></script>
    <script src="wagle/js/slideView.js"></script>

  </div>

  <div id="basicModal" class="modal">
    <div id="basicModal-Content" class="modal-Content">

    </div>
  </div>



  <div id="submitModal" class="modal">
    <div id="submitModal-Content" class="modal-Content">
      <div id="submitModalText">

      </div>
      <div>
        <div id="modalOk" onclick="isOk(true)"><span class="submitFont">확인</span></div>
        <div id="modalCancle" onclick="isOk(false)"><span class="submitFont">취소</span></div>
      </div>
    </div>
  </div>
</body>


</html>